(()=>{"use strict";var e={387:(e,t,n)=>{n.r(t)},107:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.updateCar=t.getCar=t.deleteCar=t.createCar=t.getCars=void 0;const a=n(652);t.getCars=async(e=1,t=7)=>{const n=await fetch(`${a.garage}?_page=${e}&_limit=${t}`);return{items:await n.json(),count:n.headers.get("X-Total-Count")}},t.createCar=async e=>(await fetch(a.garage,{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})).json(),t.deleteCar=async e=>(await fetch(`${a.garage}/${e}`,{method:"DELETE"})).json(),t.getCar=async e=>(await fetch(`${a.garage}/${e}`)).json(),t.updateCar=async(e,t)=>(await fetch(`${a.garage}/${e}`,{method:"PUT",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}})).json()},652:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.engine=t.winners=t.garage=void 0;const n="http://127.0.0.1:3000";t.garage=`${n}/garage`,t.winners=`${n}/winners`,t.engine=`${n}/engine`},539:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={carsCount:4,carsPage:1,winnersCount:1,winnersPage:1,view:"garage",sortBy:null,sortOrder:null}},962:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.renderHTML=void 0;const a=n(62),o=n(802);t.renderHTML=async()=>{const e=`\n    <div class="menu">\n      <button class="button" id="garage-menu-button">To garage</button>\n      <button class="button" id="winners-menu-button">To winners</button>\n    </div>\n\n    <div id="garage-section">\n      ${a.renderGarageView()}\n    </div>\n\n    <div id="winners-section" style="display: none">\n      ${o.renderWinnersView()}\n    </div>\n\n    <div class="pagination">\n      <button class="button prev-button" id="prev">Prev</button>\n      <button class="button next-button" id="next">Next</button>\n    </div>\n  `,t=document.createElement("div");t.innerHTML=e,document.body.append(t)}},258:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.listeners=void 0;const a=n(107),o=n(62),d=n(671),r=n(760),s=()=>{const e=document.getElementById("headerSection");null==e||e.remove();const t=document.querySelector(".garage");null==t||t.remove(),o.renderGarageView(),d.updateStateGarage()};t.listeners=()=>{const e=document.getElementById("garage-menu-button"),t=document.getElementById("winners-menu-button"),n=document.getElementById("create"),o=document.getElementById("update"),d=document.getElementById("generator-button");let i=null;null==e||e.addEventListener("click",(()=>{document.getElementById("garage-section").setAttribute("style","display:block"),document.getElementById("winners-section").setAttribute("style","display:none")})),null==t||t.addEventListener("click",(()=>{document.getElementById("winners-section").setAttribute("style","display:block"),document.getElementById("garage-section").setAttribute("style","display:none")})),null==n||n.addEventListener("submit",(async e=>{e.preventDefault();const t=document.getElementById("create-name"),n=document.getElementById("create-color"),o={name:t.value,color:n.value};await a.createCar(o),s(),t.value="",n.value="#ffffff"})),null==d||d.addEventListener("click",(async e=>{const t=e.target;t.disabled=!0;const n=r.generateCars();await Promise.all(n.map((e=>a.createCar(e)))),s(),t.disabled=!1})),null==o||o.addEventListener("submit",(async e=>{e.preventDefault();const t=document.getElementById("update-name"),n=document.getElementById("update-color"),o=document.getElementById("update-button"),d={name:t.value,color:n.value};if(i){const e=i.id;await a.updateCar(e,d)}s(),t.value="",n.value="#ffffff",t.disabled=!0,n.disabled=!0,o.disabled=!0})),document.body.addEventListener("click",(async e=>{const t=e.target;if(t.classList.contains("remove-button")){const e=+t.id.split("remove-car-")[1];await a.deleteCar(e),s()}if(t.classList.contains("select-button")){const e=t.id.split("select-car-")[1];i=await a.getCar(Number(e));const n=null==i?void 0:i.name,o=null==i?void 0:i.color,d=document.getElementById("update-name"),r=document.getElementById("update-color"),s=document.getElementById("update-button");d.value=n,r.value=o,d.disabled=!1,r.disabled=!1,s.disabled=!1}}))}},760:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.generateCars=void 0;const n=["Audi","Hyundai","Mersedes","Skoda","BMW","Kia","Mitsubishi","Toyota","Ford","Lada","Nissan","Volkswagen","Honda","Mazda","Renault"],a=["A8","Sonata","Maybach S","Octavia","M5","Rio","Outlander","Camry","Transit","Vesta","Murano","Polo","Pilot","Model 6","Logan"],o=()=>{let e="#";for(let t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e};t.generateCars=(e=100)=>new Array(e).fill(1).map((()=>({name:`${n[Math.floor(Math.random()*n.length)]} ${a[Math.floor(Math.random()*n.length)]}`,color:o()})))},671:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateStateGarage=void 0;const o=n(107),d=a(n(539));t.updateStateGarage=async()=>{const{items:e}=await o.getCars(),t=e.length;d.default.carsCount=t;const n=document.getElementById("prev"),a=document.getElementById("next");7*d.default.carsPage<d.default.carsCount?a.disabled=!1:a.disabled=!0,d.default.carsPage>1?n.disabled=!1:n.disabled=!0}},62:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.renderGarageView=t.garageHeader=t.renderCarImage=void 0;const o=n(107),d=a(n(539));t.renderCarImage=e=>`\n  <?xml version="1.0" standalone="no"?>\n  <svg version="1.0" xmlns="http://www.w3.org/2000/svg"\n  viewBox="0 0 1280.000000 640.000000" preserveAspectRatio="xMidYMid meet">\n    <g transform="translate(0.000000,640.000000) scale(0.100000,-0.100000)" style="fill:${e}" stroke="none">\n      <path d="M3565 5336 c-106 -30 -101 -26 -108 -111 -4 -42 -9 -80 -12 -85 -6 -10 -246 -105\n      -590 -234 -448 -167 -1052-415 -1173 -483 -78 -43 -193 -91\n      -250 -104 -23 -5 -98 -14 -165 -19 -67 -6 -167 -19 -222 -30 -154 -31 -340 -49 -563 -57 l-203\n      -6 -43 -66 c-59 -91 -60 -95 -26 -130 37 -37 38 -65 3\n      -150 -25 -62 -27 -78 -31 -256 l-4 -190 -38 -32 c-91 -78 -133 -209 -134 -418 0 -194 11 -396\n      26 -482 13 -71 14 -74 72 -122 69 -58 130 -129 158 -184 64\n      -126 534 -211 1384 -250 l92 -4 -6 119 c-6 142 8 256 49 383 112 352 394 622 756 722 90 26 112\n      28 278 28 165 0 188 -2 278 -27 201 -56 361 -152 504 -302\n      140 -145 222 -293 274 -492 21 -79 24 -109 23 -279 -1 -127 -6 -214 -16 -263 l-15 -73 3006 7\n      c1653 4 3007 8 3009 9 1 1 -8 37 -20 81 -19 67 -22 105 -22\n      259 -1 166 1 187 27 279 117 421 467 736 885 797 119 17 325 7 432 -21 239 -63 453 -205 601\n      -399 70 -92 154 -267 185 -386 24 -88 27 -119 27 -260 1\n      -116 -4 -181 -16 -234 -10 -41 -16 -75 -15 -76 2 -1 62 2 133 6 266 16 458 45 525 79 48 24 97\n      81 127 146 l24 52 -16 157 c-15 152 -15 163 4 284 63 388 50\n      680 -35 802 -134 193 -526 336 -1429 519 -737 149 -1322 209 -2033 210 -228 0 -226 0 -347 85\n      -187 131 -1045 607 -1471 815 -383 187 -788 281 -1439 332\n      -208 17 -1106 16 -1400 0 -121 -7 -314 -19 -430 -27 -302 -22 -286 -22 -341 10 -140 81 -187 94\n      -269 71z m1885 -333 c6 -37 38 -238 71 -446 32 -209 66\n      -422 75 -474 9 -52 15 -96 13 -97 -11 -9 -1699 29 -1951 44 -206 13 -417 36 -485 54 -98 26 -198\n      119 -249 231 -35 75 -36 172 -5 255 17 45 30 61 68 86 83\n      54 135 80 253 127 341 136 858 230 1460 267 269 16 270 16 511 18 l227 2 12 -67z m630 47 c264 -18\n      777 -110 1029 -186 186 -56 445 -188 756 -387 211 -134\n      274 -181 250 -185 -75 -12 -133 -50 -162 -106 -19 -35 -21 -136 -4 -179 l11 -27 -907 2 -906 3 -59\n      160 c-110 302 -298 878 -298 916 0 6 95 2 290 -11z"/>\n      <path d="M2633 3125 c-223 -40 -410 -141 -568 -306 -132 -138 -213 -283 -262\n      -467 -22 -83 -26 -119 -26 -247 -1 -169 10 -236 65 -382 87 -230 271 -436 493 -551 85 -44 178 -78\n      271 -98 107 -23 312 -23 419 1 392 84 699 375 802 761 23\n      86 26 120 27 254 1 158 -5 199 -46 330 -98 310 -355 567 -668 669 -150 50 -354 64 -507 36z m350\n      -301 c249 -56 457 -247 543 -499 25 -72 28 -95 28 -220\n      1 -153 -15 -228 -74 -345 -94 -186 -283 -337 -485 -386 -96 -24 -268 -24 -360 0 -320 84 -544 355\n      -562 681 -20 359 209 673 558 765 94 24 253 26 352 4z"/>\n      <path d="M10700 3119 c-390 -84 -696 -376 -797 -759 -31 -117 -41 -292 -24\n      -411 33 -227 150 -453 318 -609 267 -250 643 -344 993 -249 117 32 283 118 380 196 487 396 518 1128\n      67 1560 -97 93 -166 140 -290 198 -137 64 -235 86\n      -407 91 -120 3 -162 0 -240 -17z m445 -313 c238 -81 409 -258 486 -506 30 -96 33 -289 5 -388 -110\n      -400 -513 -637 -911 -536 -149 38 -313 147 -402 267 -176\n      238 -203 533 -71 797 34 69 60 103 138 180 77 78 111 104 181 139 129 65 207 81 364 77 109 -3 143 -7 210 -30z"/>\n    </g>\n  </svg>\n`;t.garageHeader=async()=>{await o.getCars().then((e=>{const t=document.querySelector("#garage-section"),n=document.createDocumentFragment(),a=document.createElement("div");a.id="headerSection";const o=document.createElement("h1");o.classList.add("header"),o.innerHTML=`Garage ${e.count}`;const r=document.createElement("h2");r.classList.add("mb"),r.innerHTML=`Page #${d.default.carsPage}`,a.append(o),a.append(r),n.append(a),null==t||t.appendChild(n)}))},t.renderGarageView=()=>(t.garageHeader(),(async()=>{await o.getCars().then((e=>{const n=document.querySelector("#garage-section"),a=document.createDocumentFragment(),o=document.createElement("ul");o.classList.add("garage"),e.items.forEach((e=>{const n=document.createElement("li");n.innerHTML=(e=>`\n    <div class="general-buttons">\n      <button class="button select-button" id="select-car-${e.id}">Select</button>\n      <button class="button remove-button" id="remove-car-${e.id}">Remove</button>\n      <span class="car-name">${e.name}</span>\n    </div>\n    <div class="road">\n      <div class="launch-pad">\n        <div class="control-panel">\n          <button class="icon start-engine-button" id="start-engine-car-${e.id}" >A</button>\n          <button class="icon stop-engine-button" disabled id="stop-engine-car-${e.id}" >B</button>\n        </div>\n        <div class="car" id="car-${e.id}">\n          ${t.renderCarImage(e.color)}\n        </div>\n      </div>\n      <div class="flag" id="flag-${e.id}">🚩</div>\n    </div>\n  `)(e),o.append(n)})),a.append(o),null==n||n.appendChild(a)}))})(),'\n    <div class="form-container">\n      <form class="form" id="create">\n        <input name="name" type="text" class="input-name" id="create-name">\n        <input name="color" type="color" class="input-color" id="create-color" value="#ffffff">\n        <button type="submit" class="button" id="create-button">Create</button>\n      </form>\n      <form class="form" id="update">\n        <input name="name" type="text" class="input-name" id="update-name" disabled>\n        <input name="color" type="color" class="input-color" id="update-color" value="#ffffff" disabled>\n        <button type="submit" class="button" id="update-button" disabled>Update</button>\n      </form>\n    </div>\n  \n    <div class="race-control">\n      <button class="button" id="race-button">Race</button>\n      <button class="button" id="reset-button">Reset</button>\n      <button class="button" id="generator-button">Generate cars</button>\n    </div>\n  ')},802:function(e,t,n){var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.renderWinnersView=void 0;const o=a(n(539));t.renderWinnersView=()=>`\n    <h1>Winners ${o.default.winnersCount}</h1>\n    <h2>Page #${o.default.winnersPage}</h2>\n    <table class="table" cellspacing="0" border="0" cellpadding="0">\n      <thead>\n        <th>Number</th>\n        <th>Car</th>\n        <th>Name</th>\n        <th class="table-button table-wins" id="sort-by-wins">Wins</th>\n        <th class="table-button table-time" id="sort-by-time">Best time (seconds)</th>\n      </thead>\n      <tbody>\n        <tr>\n          <td>1</td>\n          <td>картинка</td>\n          <td>имя</td>\n          <td>количество побед</td>\n          <td>лучшее время</td>\n        </tr>\n      </tbody>\n    </table>\n  `}},t={};function n(a){var o=t[a];if(void 0!==o)return o.exports;var d=t[a]={exports:{}};return e[a].call(d.exports,d,d.exports,n),d.exports}n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{const e=n(962),t=n(258),a=n(671);n(387),document.addEventListener("DOMContentLoaded",(async()=>{e.renderHTML(),await a.updateStateGarage(),t.listeners()}))})()})();